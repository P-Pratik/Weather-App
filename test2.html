<!DOCTYPE html>
<html>
<script src="https://unpkg.com/@mongodb-js/charts-embed-dom"></script>

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="styles.css">
    <title>Citywise Weather Database</title>
</head>

<body>
    <div class="bg">
        <h1 class="heading">Nashik Weather Data</h1>
        <div id="nsk">
            <div class="d-flex flex-row justify-content-center">
                Start Day:
                <select id="s_day">
                    <option value="">All</option>
                    <option value="2023-10-24">2023-10-24</option>
                    <option value="2023-10-25">2023-10-25</option>
                    <option value="2023-10-26">2023-10-26</option>
                    <option value="2023-10-27">2023-10-27</option>
                    <option value="2023-10-28">2023-10-28</option>
                    <option value="2023-10-29">2023-10-29</option>
                    <option value="2023-10-30">2023-10-30</option>
                    <option value="2023-10-31">2023-10-31</option>
                    <option value="2023-11-01">2023-11-01</option>
                    <option value="2023-11-02">2023-11-02</option>
                    <option value="2023-11-03">2023-11-03</option>
                    <option value="2023-11-04">2023-11-04</option>
                    <option value="2023-11-05">2023-11-05</option>
                    <option value="2023-11-06">2023-11-06</option>
                    <option value="2023-11-07">2023-11-07</option>
                    <option value="2023-11-08">2023-11-08</option>
                    <option value="2023-11-09">2023-11-09</option>
                    <option value="2023-11-10">2023-11-10</option>
                    <option value="2023-11-11">2023-11-11</option>
                    <option value="2023-11-12">2023-11-12</option>
                    <option value="2023-11-13">2023-11-13</option>
                    <option value="2023-11-14">2023-11-14</option>
                    <option value="2023-11-15">2023-11-15</option>
                    <option value="2023-11-16">2023-11-16</option>
                    <option value="2023-11-17">2023-11-17</option>
                    <option value="2023-11-18">2023-11-18</option>
                    <option value="2023-11-19">2023-11-19</option>
                    <option value="2023-11-20">2023-11-20</option>
                    <option value="2023-11-21">2023-11-21</option>
                    <option value="2023-11-22">2023-11-22</option>
                    <option value="2023-11-23">2023-11-23</option>
                </select>
                End Day:
                <select id="e_day">
                    <option value="">All</option>
                    <option value="2023-10-24">2023-10-24</option>
                    <option value="2023-10-25">2023-10-25</option>
                    <option value="2023-10-26">2023-10-26</option>
                    <option value="2023-10-27">2023-10-27</option>
                    <option value="2023-10-28">2023-10-28</option>
                    <option value="2023-10-29">2023-10-29</option>
                    <option value="2023-10-30">2023-10-30</option>
                    <option value="2023-10-31">2023-10-31</option>
                    <option value="2023-11-01">2023-11-01</option>
                    <option value="2023-11-02">2023-11-02</option>
                    <option value="2023-11-03">2023-11-03</option>
                    <option value="2023-11-04">2023-11-04</option>
                    <option value="2023-11-05">2023-11-05</option>
                    <option value="2023-11-06">2023-11-06</option>
                    <option value="2023-11-07">2023-11-07</option>
                    <option value="2023-11-08">2023-11-08</option>
                    <option value="2023-11-09">2023-11-09</option>
                    <option value="2023-11-10">2023-11-10</option>
                    <option value="2023-11-11">2023-11-11</option>
                    <option value="2023-11-12">2023-11-12</option>
                    <option value="2023-11-13">2023-11-13</option>
                    <option value="2023-11-14">2023-11-14</option>
                    <option value="2023-11-15">2023-11-15</option>
                    <option value="2023-11-16">2023-11-16</option>
                    <option value="2023-11-17">2023-11-17</option>
                    <option value="2023-11-18">2023-11-18</option>
                    <option value="2023-11-19">2023-11-19</option>
                    <option value="2023-11-20">2023-11-20</option>
                    <option value="2023-11-21">2023-11-21</option>
                    <option value="2023-11-22">2023-11-22</option>
                    <option value="2023-11-23">2023-11-23</option>
                </select>
            </div>
            <div class="d-flex flex-column justify-content-center">
                <p class="chart-title">Normal Humidity and Observed Humidity vs Days</p>
                <div class="d-flex flex-row justify-content-center">
                    <div class="chart-container" id="chart1"></div>
                </div>
            </div>
            <div class="d-flex flex-column justify-content-center">
                <p class="chart-title">Normal Temperature and Observed Temperature vs Days</p>
                <div class="d-flex flex-row justify-content-center">
                    <div class="chart-container" id="chart2"></div>
                </div>
            </div>
            <div class="d-flex flex-column justify-content-center">
                <p class="chart-title">Observed Weather Conditions</p>
                <div class="d-flex flex-row justify-content-center">
                    <div class="chart-container" id="chart3"></div>
                </div>
            </div>
            <div class="d-flex flex-row justify-content-center">
                <button class="btn btn-primary goback" onclick="history.back()">Go Back</button>
            </div>
        </div>
    </div>

</body>

<script>
      const ChartsEmbedSDK = window.ChartsEmbedSDK;

      const sdk = new ChartsEmbedSDK({
        baseUrl: "https://charts.mongodb.com/charts-project-0-jgwha",
      });

      const chart1 = sdk.createChart({
        chartId: "65380703-4c44-46b6-8082-f62e3a1df728", 
        height: "480px",
        width: "640px"
          // Additional options go here
        
      });
      
      const chart3 = sdk.createChart({
        chartId: "6538083a-20dc-4697-8d2c-16eb09c71e54", 
        height: "480px",
        width: "640px"
          // Additional options go here
        
      });

      const chart2 = sdk.createChart({
        chartId: "653809ec-9ea5-4ba3-86b9-88efd2fbc2e1", 
        height: "480px",
        width: "640px"
          // Additional options go here
        
      });

      chart1.render(document.getElementById('chart1'));
      chart2.render(document.getElementById('chart2'));
      chart3.render(document.getElementById('chart3'));

      const daySelect1=document.getElementById("s_day");
      const daySelect2=document.getElementById("e_day");

        daySelect1.addEventListener("change", async (e) => {
            updateFilters();
        });

        daySelect2.addEventListener("change", async (e) => {
            updateFilters();
        });

        function updateFilters() {
            const selectedDate1 = daySelect1.value;
            const selectedDate2 = daySelect2.value;

            if (selectedDate1 === "" || selectedDate2 === "") {
                chart1.setFilter({});
                chart2.setFilter({});
            } else {
                // Parse the date values from daySelect1 and daySelect2
                const startDay = new Date(selectedDate1);
                const endDay = new Date(selectedDate2);

                // Use startDay and endDay in the filters
                chart1.setFilter({ Days: { $gte: startDay, $lt: endDay } });
                chart2.setFilter({ Days: { $gte: startDay, $lt: endDay } });
            }
        }
    </script>

</html>