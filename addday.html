<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>update city</title>
</head>

<body>
    <h1>Update City {Cityname}</h1>


    <form id="dataform">

        <label for="city">City:</label>
        <input type="text" id="city" required><br><br>

        <label for="country">Country:</label>
        <input type="text" id="country" required><br><br>

        <!-- 
    "datetime" : "2023-10-27",
    "tempmax" : 30.2,
    "tempmin" : 20.7,
    "humidity" : 46.4,
    "conditions" : "Partially cloudy" -->

        <label for="date">Date:</label>
        <input type="date" id="date" required>

        <label for="tempmax">Max Temperature:</label>
        <input type="number" id="tempmax" step="0.1" required>

        <label for="tempmin">Min Temperature:</label>
        <input type="number" id="tempmin" step="0.1" required>

        <label for="humidity">Humidity:</label>
        <input type="number" id="humidity" step="0.1" required>

        <label for="conditions">Conditions:</label>
        <input type="text" id="conditions" required><br><br>

        <input type="submit" value="Submit">

    </form>

    <script>
        document.getElementById('dataform').addEventListener('submit', function(event){
            event.preventDefault();

            let city = document.querySelector('#city').value;
            let country = document.querySelector('#country').value;
            let date = document.querySelector('#date').value;
            let tempmax = parseFloat(document.querySelector('#tempmax').value);
            let tempmin = parseFloat(document.querySelector('#tempmin').value);
            let humidity = parseFloat(document.querySelector('#humidity').value);
            let conditions = document.querySelector('#conditions').value;

            const data = {
                city,
                country,
                date,
                tempmax,
                tempmin,
                humidity,
                conditions
            };

            fetch('http://localhost:3000/add-day-in-city', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(responseData => {
                console.log(responseData);
                document.querySelector('#notanid').innerHTML = responseData.message;
            })
            .catch(err => {
                console.log(err);
            });
        });
    </script>

</body>

</html>